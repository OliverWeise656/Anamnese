<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HNO-Anamnese und Hörtest</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="chatbot">
        <h1>HNO-Anamnese</h1>
        <div id="messages"></div>
        <input type="text" id="userInput" placeholder="Ihre Nachricht...">
        <button id="sendButton" onclick="sendMessage()">Senden</button>
    </div>

    <div id="tone-setting" style="display: none;">
        <h1>Ton-Einstellung</h1>
        <p>Für die folgenden Tests ist es notwendig Ihren Ton einzustellen:</p>
        <p>Nach dem Drücken von "Start" hören Sie einen Ton, stellen Sie die Lautstärke Ihres Kopfhörers oder Lautsprechers so ein, dass Sie den Ton gerade noch hören können. Wenn Sie fertig sind, drücken Sie "Stopp".</p>
        <button id="startButton">Start</button>
        <button id="stopButton" disabled>Stopp</button>
    </div>

    <div id="initial-test" style="display: none;">
        <h1>Sprachverständnis-Test</h1>
        <p>Drücke den Button, um den Test zu starten.</p>
        <button id="start-initial-test-button">Test starten</button>
        <div id="test-area" style="display: none;">
            <p id="audio-instruction"></p>
            <input type="text" id="answer-input">
            <button id="submit-initial-test-button">Bestätigen</button>
        </div>
        <p id="initial-test-result" style="display: none;"></p>
    </div>

    <div id="test" style="display: none;">
        <p>Hören Sie das Wort und geben Sie es ein:</p>
        <audio id="audioPlayer"></audio>
        <input type="text" id="response" placeholder="Geben Sie das Wort ein">
        <button id="nextButton">Weiter</button>
    </div>

    <div id="hearing-test" style="display: none;">
        <h1>Hörtest</h1>
        <p>Drücken Sie den Knopf, sobald Sie den Ton hören:</p>
        <div id="instructions">
            <button onclick="startTest('right')">Rechtes Ohr testen</button>
            <button id="leftTestButton" class="hidden" onclick="startTest('left')">Linkes Ohr testen</button>
        </div>
        <div id="test" class="hidden">
            <button onclick="heardTone()">Ton gehört</button>
        </div>
        <div id="results" class="hidden">
            <h2>Ergebnisse</h2>
            <table>
                <thead>
                    <tr>
                        <th>Frequenz (Hz)</th>
                        <th>Rechts (dB)</th>
                        <th>Links (dB)</th>
                    </tr>
                </thead>
                <tbody id="resultsTableBody"></tbody>
            </table>
            <canvas id="resultsChart"></canvas>
        </div>
    </div>

    <p id="final-result" style="display: none;"></p>
    <script src="script.js"></script>
</body>
</html>
